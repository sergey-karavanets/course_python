<h1>Тема урока: модуль fraction</h1>

<ol>
	<li>Модуль <code>fractions</code></li>
	<li>Тип данных <code>Fraction</code></li>
</ol>

<p><strong>Аннотация.</strong> Урок посвящен модулю <code>fractions</code> и типу данных <code>Fraction</code>.</p>

<p>В этом уроке мы изучим числовой тип данных <code>Fraction</code>, который представляет из себя <a href="https://ru.wikipedia.org/wiki/%D0%94%D1%80%D0%BE%D0%B1%D1%8C_(%D0%BC%D0%B0%D1%82%D0%B5%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)#.D0.9E.D0.B1.D1.8B.D0.BA.D0.BD.D0.BE.D0.B2.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_.D0.B4.D1.80.D0.BE.D0.B1.D0.B8" rel="noopener noreferrer nofollow">обыкновенную дробь</a>, с заданными числителем и знаменателем;</p>

<h2 style="text-align: center;">Рациональное число</h2>

<p>Рациональное число – это число, которое можно представить в виде дроби <span class="math-tex">\(\dfrac{m}{n}\)</span>, где <span class="math-tex">\(m, n\)</span> соответственно, числитель и знаменатель, которые имеют целочисленное значение, при этом знаменатель не равен нулю. </p>

<p>Например, в дроби <span class="math-tex">\(\dfrac{5}{6}\)</span> числитель $m = 5$, а знаменатель $n=6$.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/0fde5703-fd4e-4e1a-86d3-10c2c5c47cc7/" width="49">   Знаменатель дроби показывает количество равных частей, а числитель дроби показывает, сколько из них взято.</p>

<p style="text-align: center;"><img alt="" height="275" src="https://ucarecdn.com/7d09ea7d-1b9c-4e4b-a626-07bc52d590b8/" width="786"></p>

<h2 style="text-align: center;">Тип данных Fraction</h2>

<p>Для работы с рациональными числами в Python используется тип данных <code>Fraction</code>. Тип данных <code>Fraction</code> как и <code>Decimal</code> реализован программно, поэтому он в разы медленнее встроенных числовых типов данных <code>int</code> и <code>float</code>. Тип данных <code>Fraction</code> неизменяемый. Операции над данными этого типа приводят к созданию новых объектов, при этом старые не меняются.</p>

<p>Чтобы использовать возможности типа данных <code>Fraction</code> нужно предварительно подключить модуль <code>fractions</code>:</p>

<pre><code class="language-python">from fractions import Fraction</code></pre>

<h3 style="text-align: center;">Создание Fraction</h3>

<p>Создать <code>Fraction</code> число можно несколькими способами:</p>

<ul>
	<li>из целых чисел, передав значения числителя и знаменателя дроби,</li>
	<li>из строки на основании десятичного представления;</li>
	<li>из строки на основании обыкновенной дроби;</li>
	<li>из числа с плавающей точкой (не рекомендуется).</li>
</ul>

<p>Приведенный ниже программный код создает <code>Fraction</code> числа на основе целых чисел и строк:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction(3, 4)     # 3 - числитель, 4 - знаменатель
num2 = Fraction('0.55')
num3 = Fraction('1/9')

print(num1, num2, num3, sep='\n')</code></pre>

<p>и выводит:</p>

<pre><code class="language-no-highlight">3/4
11/20
1/9</code></pre>

<p>Нужно быть очень внимательным при создании <code>Fraction</code> чисел из чисел с плавающей точкой (<code>float</code>), потому что <code>float</code> числа округляются внутри до ближайшего возможного, а <code>Fraction</code> об этом ничего не знает, поэтому копирует содержимое <code>float</code>.</p>

<p>Приведенный ниже программный код создает <code>Fraction</code> число на основе числа с плавающей точкой:</p>

<pre><code class="language-python">from fractions import Fraction

num = Fraction(0.34)

print(num)</code></pre>

<p>вместо ожидаемого вывода:</p>

<pre><code class="language-no-highlight">17/50</code></pre>

<p> код выводит:</p>

<pre><code class="language-no-highlight">6124895493223875/18014398509481984</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/3e7b7509-26c9-47bd-bc88-c0f35aff5d19/" style="float: left;" width="49">Не рекомендуется создавать <code>Fraction</code> числа из <code>float</code> чисел. В <code>Fraction</code> попадет уже неправильно округленное число. Создавать <code>Fraction</code> числа нужно из целых чисел, либо из строк!</p>

<p>Обратите внимание на то, что при создании рационального числа <code>Fraction</code>, автоматически происходит сокращение числителя и знаменателя дроби.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction(5, 10)
num2 = Fraction('75/100')
num3 = Fraction('0.25')

print(num1, num2, num3, sep='\n')</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">1/2
3/4
1/4</code></pre>

<p>Так же стоит обратить внимание на вывод дробей, являющихся целыми числами.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction(5, 1)        # 5/1 = 5
num2 = Fraction(23, 23)      # 23/23 = 1

print(num1, num2, sep='\n')</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">5
1</code></pre>

<h3 style="text-align: center;">Сравнение Fraction чисел</h3>

<p><code>Fraction</code> числа можно сравнивать между собой точно так же, как и любые другие числа. Доступны $6$ основных операторов сравнения:</p>

<ul>
	<li><code>&gt;</code>: больше;</li>
	<li><code>&lt;</code>: меньше;</li>
	<li><code>&gt;=</code>: больше либо равно;</li>
	<li><code>&lt;=</code>: меньше либо равно;</li>
	<li><code>==</code>:  в точности равно;</li>
	<li><code>!=</code>: не равно.</li>
</ul>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction(1, 2)        # 1/2
num2 = Fraction(15, 30)      # 15/30=1/2
num3 = Fraction(3, 5)        # 3/5
num4 = Fraction(5, 3)        # 5/3
num5 = 1
num6 = 0.8


print(num1 == num2)
print(num1 != num4)
print(num2 &gt; num3)
print(num4 &lt;= num1)
print(num1 &lt; num5)
print(num6 &gt; num4)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">True
True
False
False
True
False</code></pre>

<p>Обратите внимание на то, что мы можем сравнивать <code>Fraction</code> числа и целые числа (числа с плавающей точкой) без явного приведения типов. </p>

<h3 style="text-align: center;">Арифметические операции над Fraction числами</h3>

<p>Тип данных <code>Fraction</code> отлично интегрирован в язык Python. С <code>Fraction</code> числами работают все привычные операции: сложение, вычитание, умножение, деление, возведение в степень.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction('1/10')
num2 = Fraction('2/3')

print(num1 + num2)
print(num1 - num2)
print(num1 * num2)
print(num1 / num2)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">23/30
-17/30
1/15
3/20</code></pre>

<p>Мы также можем совершать арифметические операции над <code>Fraction</code> и целыми числами (миксовать <code>Fraction</code> и <code>int</code>), но не рекомендуется смешивать их с <code>float</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num = Fraction('3/8')

print(num + 1)
print(num - 1)
print(num * 2)
print(num ** 4)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">11/8
-5/8
3/4
81/4096</code></pre>

<p>Обратите внимание, на то, что операция возведения в степень (<code>**</code>) для <code>Fraction</code> чисел может возвращать вещественный результат.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num1 = Fraction('3/8')
num2 = Fraction('1/2')

print(num1 ** num2)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">0.6123724356957945</code></pre>

<p>По сути тут происходит вычисление числа $\left(\dfrac{3}{8}\right)^{\frac12} = \sqrt{\dfrac{3}{8}} \approx 0.6123724356957945$.</p>

<h3 style="text-align: center;">Математические функции</h3>

<p><code>Fraction</code> числа можно передавать как аргументы функций, ожидающих <code>float</code>. Тогда они будут преобразованы во <code>float</code>. К примеру, модуль <code>math</code> оперирующий <code>float</code> числами, может работать и с <code>Fraction</code> числами.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction
from math import *

num1 = Fraction('1.44')
num2 = Fraction('0.523')

print(sqrt(num1))
print(sin(num2))
print(log(num1 + num2))</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">1.2
0.4994813555186418
0.6744739152943241</code></pre>

<p>Важно понимать, что результатом работы функций модуля <code>math</code> являются <code>float</code> числа, а не <code>Fraction</code>.</p>

<h3 style="text-align: center;">Свойства numerator и denominator</h3>

<p>Для получения числителя и знаменателя <code>Fraction</code> числа используются свойства <code>numerator</code> и <code>denominator</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num = Fraction('5/16')

print('Числитель дроби равен:', num.numerator)
print('Знаменатель дроби равен:', num.denominator)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">Числитель дроби равен: 5
Знаменатель дроби равен: 16</code></pre>

<p>В Python 3.8 появился метод <code>as_integer_ratio()</code>, который возвращает кортеж, состоящий из числителя и знаменателя данного <code>Fraction</code> числа.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction

num = Fraction('-5/16')

print(num.as_integer_ratio())</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">(-5, 16)</code></pre>

<h3 style="text-align: center;">Метод limit_denominator()</h3>

<p>Метод <code>limit_denominator()</code> возвращает самую близкую к данному числу рациональную дробь, чей знаменатель не превосходит переданного аргумента.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from fractions import Fraction
import math

print('PI =', math.pi)

num = Fraction(str(math.pi))

print('No limit =', num)

for d in [1, 5,  50, 90, 100, 500, 1000000]:
    limited = num.limit_denominator(d)
    print(limited)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">PI = 3.141592653589793
No limit = 3141592653589793/1000000000000000
3
16/5
22/7
267/85
311/99
355/113
3126535/995207</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/755332bb-17c2-44be-a277-43cc69d398a1/" style="float: left;" width="49">Метод <code>limit_denominator()</code> позволяет получить очень точные рациональные приближения иррациональных чисел, что очень удобно во многих математических задачах.</p>

<h2 style="text-align: center;">Примечания</h2>

<p><strong>Примечание 1.</strong> Для того, чтобы каждый раз не писать название типа, можно использовать следующий код:</p>

<pre><code class="language-python">from fractions import Fraction as F

num1 = F('1/5') + F('3/2')
num2 = F('1/4') * F('2/5')

print(num1)
print(num2)</code></pre>

<p><strong>Примечание 2.</strong> Полное руководство по данному типу данных находится в <a href="https://docs.python.org/3/library/fractions.html" rel="noopener noreferrer nofollow">официальной документации</a>.</p>

<p><strong>Примечание 3. </strong>В Python нельзя совершать арифметические операции (<code>+, -, *, /</code>) между типами <code>Decimal</code> и <code>Fraction</code>. </p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">from decimal import Decimal
from fractions import Fraction

num1 = Decimal('12.5')
num2 = Fraction(19, 3)

print(num1 + num2)</code></pre>

<p>приводит к ошибке:</p>

<pre><code class="language-no-highlight">TypeError: unsupported operand type(s) for +: 'Decimal' and 'Fraction'</code></pre>

<p> </p>

<h2 style="text-align: right;"><strong>Made with 💛 by BEEGEEK</strong></h2>