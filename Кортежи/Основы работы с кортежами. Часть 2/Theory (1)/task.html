<h2 style="text-align: center;">Упаковка кортежей</h2>

<p><strong>Упаковкой кортежа</strong> называют присваивание его какой-либо переменной.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">tuple1 = (1, 2, 3)
tuple2 = ('b',)
tuple3 = ('red', 'green', 'blue', 'cyan')

print(type(tuple1))
print(type(tuple2))
print(type(tuple3))</code></pre>

<p>выводит:</p>

<pre><code class="language-1c">&lt;class 'tuple'&gt;
&lt;class 'tuple'&gt;
&lt;class 'tuple'&gt;</code></pre>

<p style="text-align: center;"><img alt="" height="303" src="https://ucarecdn.com/23ee63c0-df3b-48c4-a674-6646ded1c8ae/" width="800"></p>

<p>Обратите внимание на то, что упаковка выполняется всегда, когда справа от знака равенства стоит больше одного значения.</p>

<p>Приведенный ниже код автоматически запакует <code>1, 2, 3</code> и <code>'b',</code> в кортежи <code>(1, 2, 3)</code> и <code>('b', )</code> и присвоит их значения переменным <code>tuple1</code> и <code>tuple2</code>:</p>

<pre><code class="language-python">tuple1 = 1, 2, 3
tuple2 = 'b',

print(type(tuple1))
print(type(tuple2))</code></pre>

<p>выводит:</p>

<pre><code class="language-1c">&lt;class 'tuple'&gt;
&lt;class 'tuple'&gt;</code></pre>

<h2 style="text-align: center;">Распаковка кортежей</h2>

<p>Обратная операция, смысл которой в том, чтобы присвоить значения элементов кортежа отдельным переменным называется <strong>распаковкой кортежа</strong>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">colors = ('red', 'green', 'blue', 'cyan')

(a, b, c, d) = colors

print(a)
print(b)
print(c)
print(d)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">red
green
blue
cyan</code></pre>

<p>В приведенном примере кортеж <code>colors</code> распаковывается в переменные <code>a, b, c, d</code>.</p>

<p style="text-align: center;"><img alt="" height="267" src="https://ucarecdn.com/6da4b10c-5080-4d0f-beea-13c525eb09bd/" width="766"></p>

<p>Мы можем опустить скобки слева от знака равенства:</p>

<pre><code class="language-python">colors = ('red', 'green', 'blue', 'cyan')
a, b, c, d = colors</code></pre>

<p>Количество переменных должно совпадать с числом элементов в кортеже.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">colors = ('red', 'green', 'blue', 'cyan')
a, b = colors</code></pre>

<p>приводит к ошибке:</p>

<pre><code class="language-no-highlight">ValueError: too many values to unpack</code></pre>

<p>Аналогично, приведенный ниже код: </p>

<pre><code class="language-python">colors = ('red', 'green', 'blue')
a, b, c, d = colors</code></pre>

<p>приводит к ошибке:</p>

<pre><code class="language-no-highlight">ValueError: not enough values to unpack (expected 4, got 3)</code></pre>

<p>Однако, если необходимо получить лишь какие-то отдельные значения, то в качестве "ненужных" переменных позволено использовать символ нижнего подчеркивания <code>_</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">colors = ('red', 'green', 'blue')
a, b, _ = colors

print(a)
print(b)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">red
green</code></pre>

<p>Распаковка кортежей очень удобна на практике. По сути мы использовали ее, когда меняли местами значения двух переменных без использования временных переменных.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">a = 7
b = 17
a, b = b, a

print(a, b)
</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">17 7</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/49adce78-3830-4075-ba1c-5753b4a14152/" style="float: left;" width="49">Сначала вычисляются все значения справа, и лишь затем они кладутся в левую часть оператора присваивания. Поэтому можно менять местами значения переменных <code>a</code> и <code>b</code>, написав: <code>a, b = b, a</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">a, b, c = 3, 2, 1
b, a, c = c, a, b

print(b, c, a)</code></pre>

<p>выводит:</p>

<pre><code class="language-python">1 2 3</code></pre>

<h2 style="text-align: center;">* при распаковке кортежей</h2>

<p>Как мы знаем, если при распаковке кортежа число элементов слева и справа не совпадает, то возникает ошибка времени исполнения. Есть способ собрать сразу <strong>несколько значений в одну переменную</strong>. Это делается при помощи звездочки перед именем переменной.</p>

<p>Рассмотрим программный код:</p>

<pre><code class="language-python">a, b, *tail = 1, 2, 3, 4, 5, 6
</code></pre>

<p>В этом случае в переменной <code>a</code> будет записана единица, в переменной <code>b</code> — двойка, а в переменной<em> </em><code>tail</code> — список, состоящий из всех аргументов, которые не попали в предыдущие переменные. В данном случае <code>tail</code><em> </em>будет равен <code>[3, 4, 5, 6]</code>.</p>

<p>Учтите, что <code>tail</code> всегда будет списком, даже когда в него попадает лишь один элемент или даже ноль.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">a, b, *tail = 1, 2, 3

print(tail)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">[3]</code></pre>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">a, b, *tail = 1, 2

print(tail)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">[]</code></pre>

<p>Звездочка может быть только у одного аргумента, но необязательно у последнего.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">*names, surname = ('Стефани', 'Джоанн', 'Анджелина', 'Джерманотта')

print(names)
print(surname)
</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">['Стефани', 'Джоанн', 'Анджелина']
Джерманотта</code></pre>

<p>Аргумент со звездочкой может стоять и посередине.</p>

<pre><code class="language-python">singer = ('Freddie', 'Bohemian Rhapsody', 'Killer Queen', 'Love of my life', 'Mercury')

name, *songs, surname = singer

print(name)
print(songs)
print(surname)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">Freddie
['Bohemian Rhapsody', 'Killer Queen', 'Love of my life']
Mercury</code></pre>

<h2 style="text-align: center;">Примечания</h2>

<p><strong>Примечание 1.</strong> Если вы хотите распаковать единственное значение в кортеже, после имени переменной должна идти запятая.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">a = 1,      # не распаковка, а просто присвоение
b, = 1,     # распаковка

print(a)
print(b)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">(1,)
1</code></pre>

<p><strong>Примечание 2. </strong>Распаковывать можно не только кортеж, правая сторона может быть любой последовательностью (кортеж, строка или список).</p>

<pre><code class="language-python">info = ['timur', 'beegeek.org']
user, domain = info    # распаковка списка

print(user)
print(domain)

a, b, c, d = 'math'    # распаковка строки

print(a)
print(b)
print(c)
print(d)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">timur
beegeek.org
m
a
t
h</code></pre>

<p><strong>Примечание 3.</strong> Помимо метода <code>split()</code> строковый тип данных содержит метод <code>partition()</code>. Метод <code>partition()</code> принимает на вход один аргумент <code>sep</code>, разделяет строку при первом появлении <code>sep</code> и <strong>возвращает кортеж</strong>, состоящий из трех элементов: часть перед разделителем, сам разделитель и часть после разделителя. Если разделитель не найден, то кортеж содержит саму строку, за которой следуют две пустые строки.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">s1 = 'abc-de'.partition('-')
s2 = 'abc-de'.partition('.')
s3 = 'abc-de-fgh'.partition('-')

print(s1)
print(s2)
print(s3)</code></pre>

<p>выведет:</p>

<pre><code class="language-no-highlight">('abc', '-', 'de')
('abc-de', '', '')
('abc', '-', 'de-fgh')</code></pre>

<p><strong>Примечание 4.</strong> С использованием кортежей многие алгоритмы приобретают достаточно краткую форму. Например, вычисление чисел Фибоначчи может выглядеть следующим образом:</p>

<pre><code class="language-python">n = int(input())
f1, f2 = 1, 1
for i in range(n):
    print(f1)
    f1, f2 = f2, f1 + f2
</code></pre>

<p><strong>Примечание 5.</strong> Замечательная серия <a href="https://habr.com/ru/post/319164/" rel="noopener noreferrer nofollow">статей</a> о коллекциях (<code>list, tuple, str, set, dict</code>) в Python.</p>

<h2 style="text-align: right;"><strong>Made with 💛 by BEEGEEK</strong></h2>