<h1>Тема урока: файловый ввод и вывод</h1>

<ol>
	<li>Понятие файла</li>
	<li>Файловый ввод и вывод</li>
	<li>Работа с файлами</li>
	<li>Типы файлов</li>
	<li>Методы доступа к файлам</li>
	<li>Имена файлов</li>
	<li>Кодировка файлов</li>
</ol>

<p><strong>Аннотация.</strong> Урок посвящен основным понятиям, связанным с файлами.</p>

<h2 style="text-align: center;">Файловый ввод и вывод</h2>

<p>Программы, которые мы писали до сих пор, требовали повторного ввода данных при каждом запуске, потому что, как только программа заканчивает свою работу, данные для переменных исчезают из оперативной памяти. Если их нужно сберечь между выполнениями программы, требуется запись. Данные записываются в файл, обычно сохраняющийся на диске компьютера.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/936f0eb3-db10-44bb-accd-4217d197ac7b/" width="49">   Файл (англ. <em>file</em>) — именованная область данных на носителе информации.</p>

<p>Сохраненные в файле данные обычно остаются в нем после завершения работы программы, их можно позже извлечь и использовать.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/42fc12a2-4065-4067-8be5-aa1074651571/" style="float: left;" width="49">Когда программе нужно сохранить данные для дальнейшего использования, она пишет их в файл. Из файла записанные данные можно считать.</p>

<p>Программисты называют такой процесс сохранения данных — <strong>запись данных</strong> в файл. Когда часть данных пишется в файл, она копируется из переменной, находящейся в оперативной памяти. Файл, куда сохраняются данные, называется <strong>файл вывода</strong>, потому что программа помещает в него выходные данные.</p>

<p style="text-align: center;"><img alt="" height="447" src="https://ucarecdn.com/c385bb22-5470-4b8f-8908-74ba3b47779d/" width="852"></p>

<p>Процесс извлечения данных из файла называется <strong>чтением данных</strong> из файла. Данные считываются из <strong>файла ввода</strong>. Программа извлекает входные данные из этого файла. Когда порция данных считывается из файла, она копируется в оперативную память, где на нее ссылается переменная.</p>

<p style="text-align: center;"><img alt="" height="419" src="https://ucarecdn.com/c10cce79-b816-42d3-b10d-3cb93cb184c1/" width="801"></p>

<h2 style="text-align: center;">Работа с файлами</h2>

<p>Когда в программе используется файл, как правило требуется выполнить три шага:</p>

<ol>
	<li><strong>Открыть файл</strong>. В процессе открытия файла создается связь между файлом и программой. Открытие файла вывода обычно создает файл на диске и позволяет программе записать в него данные. Открытие файла ввода позволяет программе прочитать данные из файла.</li>
	<li><strong>Обработать файл.</strong> На этом шаге данные либо записываются в файл (если это файл вывода), либо считываются из файла (если это файл ввода).</li>
	<li><strong>Закрыть файл.</strong> После использования файла программой <span style="color: #a03881;"><strong>его нужно закрыть</strong></span>, тем самым освободить ресурс и разорвать связь файла с программой.</li>
</ol>

<h2 style="text-align: center;">Типы файлов</h2>

<p>Существует два типа файлов: <strong>текстовые</strong> и <strong>двоичные (бинарные)</strong>. Текстовый файл содержит данные, которые были закодированы в виде текста при помощи такой схемы кодирования, как ASCII или Юникод. Даже если файл содержит числа, эти числа в файле хранятся как набор символов. В результате файл можно открыть и просмотреть в текстовом редакторе, таком как Блокнот.</p>

<p><img alt="" height="70" src="https://ucarecdn.com/d9bc3738-8e3a-46d9-9422-34a783c683cc/" width="81">   Рекомендуем использовать текстовый редактор <a href="https://notepad-plus-plus.org/downloads/" rel="noopener noreferrer nofollow">Notepad++</a>.</p>

<p>Двоичный файл содержит данные, которые не были преобразованы в текст. Данные, которые помещены в двоичный файл, предназначены только для чтения программой, и такой файл невозможно просмотреть в текстовом редакторе.</p>

<p>Python позволяет работать и с текстовыми, и с двоичными файлами, но в рамках этого курса мы будем работать с текстовыми файлами, чтобы вы могли использовать текстовый редактор для исследования файлов, создаваемых вашими программами.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/9957e481-a82b-426a-935a-e8ac7300dc7a/" width="49">   Разделение файлов на текстовые и бинарные искусственное, так как любой текстовый файл бинарен.</p>

<h2 style="text-align: center;">Методы доступа к файлам</h2>

<p>Большинство языков программирования обеспечивает два способа получения доступа к данным в файле:</p>

<ul>
	<li><strong>последовательный</strong><strong>,</strong></li>
	<li><strong>прямой </strong>или <strong>произвольный</strong>.</li>
</ul>

<p>Последовательный, как при проигрывании кассет с записью на пленке, выдает порции информации одну за другой. При работе с таким файлом не получится перескочить сразу к нужной части данных, сначала придется прочитать все предыдущие. </p>

<p>При работе с файлом с прямым или произвольным доступом можно перескочить непосредственно к любой порции данных, не читая предыдущие. Как проигрыватель компакт-дисков или МР3-плеер перескакивает сразу к любой песне.</p>

<h2 style="text-align: center;">Имена файлов</h2>

<p>Большинство пользователей компьютеров привыкли, что файлы определяются по имени. Когда создаете документ с помощью текстового редактора и сохраняете его в файле, указываете имя файла. Если исследуете содержимое диска с помощью <strong>проводника Windows</strong>, видите список имен файлов.</p>

<p>На рисунке показано, как в Windows могут выглядеть значки файлов с именами <code>Python.jpg</code>, <code>Записки.tхt</code> и <code>Резюме.dосх</code>.</p>

<p style="text-align: center;"><img alt="" height="152" src="https://ucarecdn.com/280c3cb4-508f-4267-a025-a97fd3dc28c0/" width="393"></p>

<p>У каждой операционной системы собственные правила именования файлов. Многие системы поддерживают использование расширений файлов, т.е. коротких последовательностей символов, которые расположены в конце имени файла и предваряются точкой. Файлы, изображенные на рисунке, имеют расширения <code>jpg</code>, <code>txt</code> и <code>docx</code>. Расширение обычно говорит о типе данных в файле. Например, расширение <code>jpg</code> сообщает, что файл содержит графическое изображение, сжатое согласно стандарту JPEG. Расширение <code>txt</code> свидетельствует, что в файле текст. Расширение <code>docx</code> информирует о наличии в файле документа Microsoft Word.</p>

<h2 style="text-align: center;">Кодировка файлов</h2>

<p>В <a href="https://stepik.org/lesson/313439/step/1?unit=295959" rel="noopener noreferrer nofollow">прошлом курсе</a> мы говорили о том, как строки текста хранятся в памяти компьютера, таблицах символов ASCII и Юникод, а также о кодировке UTF-8. </p>

<p>Кодировка UTF-8 самая распространенная, рекомендуем использовать именно ее в качестве кодировки по умолчанию для текстовых файлов.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/92da9643-a502-4622-b09e-6454d3d18119/" style="float: left;" width="49">UTF-8 — сложная кодировка, на обозначение одного символа в ней может использоваться от одного до шести байт. Подробнее про эту кодировку можно почитать в <a href="https://ru.wikipedia.org/wiki/UTF-8" rel="noopener noreferrer nofollow">википедии</a>.</p>

<p>В операционной системе Windows до сих пор используется однобайтовая кодировка Windows-1251 (😨). Чтобы избежать проблем при работе с текстовыми файлами в Windows нужно явно указывать кодировку. В редакторе Notepad («Блокнот») можно указывать кодировку при сохранении файла.</p>

<p style="text-align: center;"><img alt="" height="633" src="https://ucarecdn.com/f5b91c49-5c4e-49d8-85f5-48cdcf74660e/" width="657"></p>

<p>Если после такого сохранения открыть файл <code>Интересная цитата.txt</code>, то мы увидим нужную кодировку.</p>

<p style="text-align: center;"><img alt="" height="335" src="https://ucarecdn.com/ddc0d320-60f6-45c4-bdc1-b2f31e8ec682/" width="540"></p>

<p><img alt="" height="49" src="https://ucarecdn.com/ba922535-23ce-4063-b1ce-9075f41e4fc2/" style="float: left;" width="49">При работе с ОС Linux и MacOS таких проблем не возникает вовсе, поскольку в них кодировка UTF-8 применяется по умолчанию.</p>

<p>В редакторе Notepad++ кодировка файла устанавливается так:</p>

<p style="text-align: center;"><img alt="" height="614" src="https://ucarecdn.com/1ff101d7-d31b-4f01-adde-150799a36fee/" width="772"></p>

<h2 style="text-align: center;">Относительные и абсолютные пути</h2>

<p>Путь файла (или путь к файлу) — последовательное указание имен папок, через которые надо пройти, чтобы добраться до объекта.</p>

<p>Пути к файлу бывают двух типов:</p>

<ul>
	<li>абсолютные;</li>
	<li>относительные.</li>
</ul>

<p><strong>Абсолютный путь</strong> – полный путь к файлу, показывающий <strong>точное место</strong> его расположения. Он всегда один и тот же, пока файл не перемещен.</p>

<p>Примеры абсолютного пути:</p>

<ul>
	<li><code>D:\Data\MyFiles\picture.png</code>;</li>
	<li><code>С:\MyPrograms\Python\script.py</code>;</li>
	<li><code>C:\Users\timur\YandexDisk\BeeGeek\Python\book.pdf</code>.</li>
</ul>

<p>Указывая абсолютный путь на компьютере, обязательно нужно указывать диск, а также использовать <code>\</code> (для Windows) в качестве разделителя имен папок.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/dd3d8f89-6fb8-4d2e-8fe1-356e5fb7fa36/" style="float: left;" width="49">В unix-подобных ОС, например, в Linux и Mac OS для отделения имен папок используется прямой слеш <code>/</code>, а не обратный, как в Windows.</p>

<p><strong>Относительный путь</strong> – привязан к какой-либо "отправной точке" и указан по отношению к ней.</p>

<p>Например, у нас есть картинка <code>picture.png</code>, которая хранится на диске <code>D</code>. Абсолютный путь к ней будет <code>D:\Data\MyFiles\picture.png</code>, а относительно папки <code>Data</code> можно указывать <code>MyFiles\picture.png</code>.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/cce7caef-033e-48c9-971c-16f9003a82cb/" style="float: left;" width="49">Абсолютный путь показывает точное местонахождение файла, а относительный показывает путь к файлу от какой-либо "отправной точки".</p>

<h2 style="text-align: center;">Примечания</h2>

<p><strong>Примечание 1.</strong> Конкретная физическая организация файлов, их группировка по папкам, устройство процедур доступа к информации, механизмы кеширования очень сильно зависят от операционной системы и применяемой в ней файловой системы. Как правило, при работе с файлами прикладные программисты работают на верхнем уровне <strong style="font-size: inherit;">абстракции</strong>.</p>

<p><strong>Примечание 2.</strong> Файлы обычно располагаются на носителях, работающих медленнее, чем оперативная память. Поэтому работа с ними идет в буферизированном режиме. Даже если вы запросите один байт из файла, считается целый блок (до нескольких килобайт). Он переместится в буфер оперативной памяти. Дальше файл читается оттуда, поскольку это быстрее и экономит ресурсы чтения/записи внешних носителей.</p>

<p><strong>Примечание 3.</strong> Примеры однобайтовых кодировок:</p>

<ul>
	<li><a href="https://ru.wikipedia.org/wiki/Windows-1251" rel="noopener noreferrer nofollow" target="_blank">Windows-1251</a>;</li>
	<li><a href="https://ru.wikipedia.org/wiki/CP866" rel="noopener noreferrer nofollow" target="_blank">cp-866</a>;</li>
	<li><a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%9E%D0%98-8" rel="noopener noreferrer nofollow" target="_blank">КОИ-8</a>.</li>
</ul>

<p><strong>Примечание 4.</strong> Прочитать про относительные и абсолютные пути можно <a href="http://phpfaq.ru/newbie/paths" rel="noopener noreferrer nofollow">тут</a> и <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%83%D1%82%D1%8C_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D1%83" rel="noopener noreferrer nofollow">тут</a>.</p>

<h2 style="text-align: right;"><strong>Made with 💛 by BEEGEEK</strong></h2>