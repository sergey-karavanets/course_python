<h1>Тема урока: работа с текстовыми файлами</h1>

<ol>
	<li>Запись данных в файл</li>
	<li>Файловые методы <code>write()</code> и <code>writelines()</code></li>
</ol>

<p><strong>Аннотация.</strong> Урок посвящен работе с файлами. Мы изучим методы записи в файл <code>write()</code> и <code>writelines()</code>.</p>

<h2 style="text-align: center;">Запись данных в файлы</h2>

<p>Файлы могут быть открыты для чтения, а могут для записи данных. Ниже представлены строковые литералы для задания режима доступа.</p>

<table align="center" border="1" cellpadding="1" cellspacing="1">
	<thead>
		<tr>
			<th>
			<p>Стр. литерал</p>
			</th>
			<th>Режим</th>
			<th>Описание</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="text-align: center;"><code>'r'</code></td>
			<td>
			<p>Read (чтение)</p>
			</td>
			<td>Открыть файл только для чтения. Такой файл не может быть изменен.</td>
		</tr>
		<tr>
			<td style="text-align: center;"><code>'w'</code></td>
			<td>Write (запись)</td>
			<td>Открыть файл для записи. Если файл уже существует, то стереть его содержимое.<br>
			Если файл не существует, он будет создан.</td>
		</tr>
		<tr>
			<td style="text-align: center;"><code>'a'</code></td>
			<td>Append (добавление)</td>
			<td>Открыть файл для записи. Все записываемые в файл данные будут<br>
			добавлены в его конец. Если файл не существует, то он будет создан.</td>
		</tr>
		<tr>
			<td style="text-align: center;"><code>'r+'</code></td>
			<td>Read + Write</td>
			<td>Открыть файл для чтения и записи. В этом режиме происходит частичная перезапись содержимого файла с самого начала.</td>
		</tr>
		<tr>
			<td style="text-align: center;"><code>'x'</code></td>
			<td>Create (создание)</td>
			<td>Создать новый файл. Если файл уже существует, произойдет ошибка.</td>
		</tr>
	</tbody>
</table>

<p>Для записи используются два файловых метода:</p>

<ul>
	<li><code>write()</code> – записывает переданную строку в файл;</li>
	<li><code>writelines()</code> – записывает переданный список строк в файл.</li>
</ul>

<h3 style="text-align: center;">Метод write()</h3>

<p>Общий формат применения файлового метода <code>write()</code>:</p>

<pre><code>файловая_переменная.writе(строковое_значение)</code></pre>

<p>Здесь</p>

<ul>
	<li><code>файловая переменная</code> – это имя переменной, которая ссылается на файловый объект;</li>
	<li><code>строковое значение</code> – это символьная последовательность, которая будет записана в файл.</li>
</ul>

<p><img alt="" height="49" src="https://ucarecdn.com/7acf9100-7c7d-49f6-a95d-18836649d96d/" width="49">   Для записи данных в файл он должен быть открыт для записи (режимы <code>'w', 'а', 'r+'</code>), иначе произойдет ошибка.</p>

<p>Рассмотрим текcтовый файл <code>myfile.txt</code>, содержащий следующие строки:</p>

<pre><code class="language-no-highlight">First line of the file.
Second line of the file.
Third line of the file.</code></pre>

<p style="text-align: center;"><img alt="" height="406" src="https://ucarecdn.com/0e5a76c0-6861-4d9f-a6c4-01df7328568e/" width="459"></p>

<p>Если файл открыт в режиме <code>'w'</code>, то его содержимое сначала полностью стирается, а уже затем в него добавляются данные.</p>

<p>После выполнения следующего кода:</p>

<pre><code class="language-python">with open('myfile.txt', 'w', encoding='utf-8') as file:
    file.write('Python and beegeek forever\n')
    file.write('We love stepik &lt;3')</code></pre>

<p>файл <code>myfile.txt</code> будет содержать:</p>

<pre><code class="language-no-highlight">Python and beegeek forever
We love stepik &lt;3</code></pre>

<p style="text-align: center;"><img alt="" height="434" src="https://ucarecdn.com/2684416a-c2ac-4a54-a802-04d9d32919f3/" width="489"></p>

<p>Если файл открыт в режиме <code>'a'</code>, то запись происходит в самый конец файла.</p>

<p>После выполнения следующего кода:</p>

<pre><code class="language-python">with open('myfile.txt', 'a', encoding='utf-8') as file:
    file.write('Python and beegeek forever\n')
    file.write('We love stepik &lt;3')</code></pre>

<p>файл <code>myfile.txt</code> будет содержать:</p>

<pre><code class="language-no-highlight">First line of the file.
Second line of the file.
Third line of the file.Python and beegeek forever
We love stepik &lt;3</code></pre>

<p>Если файл открыт в режиме <code>'r+'</code>, то происходит частичная перезапись его содержимого.</p>

<p>После выполнения следующего кода:</p>

<pre><code class="language-python">with open('myfile.txt', 'r+', encoding='utf-8') as file:
    file.write('Python and beegeek forever\n')
    file.write('We love stepik.')</code></pre>

<p>файл <code>myfile.txt</code> будет содержать:</p>

<pre><code class="language-no-highlight">Python and beegeek forever
We love stepik. file.
Third line of the file.</code></pre>

<h3 style="text-align: center;">Метод writelines()</h3>

<p>Последовательные вызовы метода <code>write()</code> дописывают текст в конец файла.</p>

<p>Приведенный ниже код создает файл <code>philosophers.txt</code> и записывает в него три строки текста:</p>

<pre><code class="language-python">with open('philosophers.txt', 'w', encoding='utf-8') as file:
    file.write('Джoн Локк\n')
    file.write('Дэвид Хьюм\n')
    file.write('Эдмyнд Берк\n')</code></pre>

<p>На практике часто приходится записывать в файл содержимое целого списка. Это можно сделать с помощью цикла или метода <code>writelines()</code>, что удобнее. Метод <code>writelines()</code> принимает в качестве аргумента список строк и записывает его в файл.</p>

<p>Приведенный ниже код создает файл <code>philosophers.txt</code> и записывает в него содержимое списка <code>philosophers</code>:</p>

<pre><code class="language-python">philosophers = ['Джoн Локк\n', 'Дэвид Хьюм\n', 'Эдмyнд Берк\n']

with open('philosophers.txt', 'w', encoding='utf-8') as file:
    file.writelines(philosophers)</code></pre>

<p>Обратите внимание, что все записанные в файл строковые значения оканчиваются символом <code>'\n'</code>, экранированной последовательностью новой строки. Символ <code>'\n'</code> не только отделяет находящиеся в файле значения друг от друга, но и обеспечивает появление каждого из них на отдельной строке во время просмотра данных в текстовом редакторе.</p>

<p>Такой вариант записи предпочтителен, когда нужно записать большой объем текста, который вы получаете и обрабатываете строчка за строчкой. Можно предварительно накопить весь текст в одну большую строку, однако для этого может потребоваться большой объём памяти. Гораздо лучше записывать строчки по мере готовности и <code>writelines</code> для этого подходит идеально!</p>

<h3 style="text-align: center;">Запись в файл с помощью функции print()</h3>

<p>Для записи данных в файл можно также использовать встроенную функцию <code>print()</code>. Для этого нужно передать ей еще один именованный аргумент <code>file</code>, указывающий на открытый файл. При этом функция <code>print()</code> автоматически добавляет переход на новую строку.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">with open('philosophers.txt', 'w', encoding='utf-8') as output:
    print('Джoн Локк', file=output)
    print('Дэвид Хьюм', file=output)
    print('Эдмyнд Берк', file=output)</code></pre>

<p>создает файл <code>philosophers.txt</code> с содержимым:</p>

<pre><code class="language-python">Джoн Локк
Дэвид Хьюм
Эдмyнд Берк</code></pre>

<p>Мы можем использовать всю мощность встроенной функции <code>print()</code> для форматирования выводимого текста.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">with open('philosophers.txt', 'w', encoding='utf-8') as output:
    print('Джoн Локк', 'Дэвид Хьюм', 'Эдмyнд Берк', sep='***', file=output)</code></pre>

<p>создает файл <code>philosophers.txt</code> с содержимым:</p>

<pre><code class="language-no-highlight">Джoн Локк***Дэвид Хьюм***Эдмyнд Берк</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/e1566505-3ab8-44a8-aca6-2523fdef479e/" style="float: left;" width="49">Не забывайте, что файловые методы <code>write()</code> и <code>writelines()</code> не добавляют переход на новую строку, поэтому для перехода на новую строку в файле необходимо явно добавить символ <code>'\n'</code>.</p>

<h2 style="text-align: center;">Примечания</h2>

<p><strong>Примечание 1.</strong> В некоторых операционных системах невыполнение операции закрытия файла может привести к потере данных. Данные сначала пишутся в буфер – небольшую область временного хранения в оперативной памяти. Когда буфер заполняется, система записывает его содержимое в файл. Это увеличивает производительность системы, потому что запись данных в оперативную память быстрее записи на диск. Процесс закрытия файла записывает любые несохраненные данные из буфера в файл. Чтобы принудительно записать содержимое буфера в файл, используется файловый метод <code>flush()</code>.</p>

<p><strong>Примечание 2.</strong> Используйте конструкцию <code>with</code> для чтения и записи файлов. Закрывать файлы — полезная привычка, и если вы используете команду <code>with</code> при работе с файлами, вам не придется беспокоиться об их закрытии. Команда <code>with</code> автоматически закрывает файл за вас.</p>

<h2 style="text-align: right;"><strong>Made with 💛 by BEEGEEK</strong></h2>