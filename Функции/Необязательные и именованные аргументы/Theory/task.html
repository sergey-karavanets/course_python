<h1>Тема урока: необязательные и именованные аргументы</h1>

<ol>
	<li>Позиционные аргументы</li>
	<li>Необязательные аргументы</li>
	<li>Именованные аргументы</li>
</ol>

<p><strong>Аннотация.</strong> Урок посвящен необязательным и именованным аргументам.</p>

<h2 style="text-align: center;">Позиционные аргументы</h2>

<p>Все ранее написанные нами функции имели <strong>позиционные аргументы</strong>. Такие аргументы передаются без указания имен. Они называются <strong>позиционными</strong>, потому что именно по позиции, расположению аргумента, функция понимает, какому параметру он соответствует.</p>

<p>Рассмотрим следующий код: </p>

<pre><code class="language-python">def diff(x, y):
    return x - y


res = diff(10, 3)    # используем позиционные аргументы
print(res)</code></pre>

<p>Такой код выведет число $7$. При вызове функции <code>diff()</code> <span style="color: #ff4363;"><strong>первому</strong></span> параметру <code>x</code> будет соответствовать <span style="color: #ff4363;"><strong>первый</strong></span> переданный аргумент, $10$, а <span style="color: #a03881;"><strong>второму</strong></span> параметру <code>y</code>  — <strong><span style="color: #a03881;">второй</span></strong> аргумент, $3$.</p>

<p>В Python можно использовать не только позиционные, но и именованные аргументы.</p>

<h2 style="text-align: center;">Именованные аргументы</h2>

<p>Аргументы, передаваемые с именами, называются <strong>именованными</strong>. При вызове функции можно использовать имена параметров из ее определения. Исключение составляют списки аргументов неопределенной длины, где используются аргументы со звездочкой, но об этом в следующем уроке. Все функции из предыдущих уроков можно вызывать, передавая им именованные аргументы.</p>

<p>Рассмотрим следующий код: </p>

<pre><code class="language-python">def diff(x, y):
    return x - y


res = diff(x=10, y=3)   # используем именованные аргументы
print(res)</code></pre>

<p>Такой код по-прежнему выведет число $7$. При вызове функции <code>diff()</code> мы явно указываем, что параметру <code>x</code> соответствует аргумент $10$, а параметру <code>y</code>— аргумент $3$.</p>

<p>Использование именованных аргументов позволяет нарушать их позиционный порядок при вызове функции. Порядок упоминания именованных аргументов не имеет значения!</p>

<p>Мы можем вызвать функцию <code>diff()</code> так:</p>

<pre><code class="language-python">res = diff(y=3, x=10)</code></pre>

<p>и получить тот же результат $7$.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/c5b00179-f85f-4202-a9ba-e780850e63f8/" style="float: left;" width="49">Возможность использования именованных аргументов — еще один повод давать параметрам значащие, а не однобуквенные имена.</p>

<h3 style="text-align: center;">Когда стоит применять именованные аргументы</h3>

<p>Каких-то строгих правил на этот счёт не существует. Однако широко практикуется такой подход: если функция принимает больше трёх аргументов, нужно хотя бы часть из них указать по имени. Особенно важно именовать значения аргументов, когда они относятся к одному типу, ведь без имен очень трудно понять, что делает функция с подобным вызовом.</p>

<p>Рассмотрим определение функции <code>make_circle()</code> для рисования круга:</p>

<pre><code class="language-python">def make_circle(x, y, radius, line_width, fill):
    # тело функции</code></pre>

<p>Вызвать такую функцию можно так:</p>

<pre><code class="language-python">make_circle(200, 300, 17, 2.5, True)
</code></pre>

<p>Тут непросто понять, какие параметры круга задают числа $200$, $300$ или $17$.</p>

<p>Сравните:</p>

<pre><code class="language-python">make_circle(x=200, y=300, radius=17, line_width=2.5, fill=True)
</code></pre>

<p>Такой код читать значительно проще!</p>

<p><img alt="" height="49" src="https://ucarecdn.com/4a26a793-56ea-44a2-b570-5ed609cf50b7/" style="float: left;" width="49">В соответствии с PEP 8 при указании значений именованных аргументов при вызове функции знак равенства не окружается пробелами.</p>

<p>Когда значение аргументов очевидно, можно их не именовать. Да, очевидность относительна, но обычно легко понять, что скрывается за значениями при вызове функции <code>point3d(7, 50, 13)</code> или <code>rgb(7, 255, 45)</code>. В первом случае переданные аргументы – координаты точки в трехмерном пространстве, во втором – значения компонент <strong>red</strong>, <strong>green</strong>, <strong>blue</strong> некоторого цвета. Тут можно ориентироваться только на здравый смысл, жестких правил нет.</p>

<p>Мы уже сталкивались с именованными аргументами, когда вызывали функцию <code>print()</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">print('aaaa', 'bbbbb', sep='*', end='##')
print('cccc', 'dddd', sep='()')
print('eeee', 'ffff', sep='123', end='python')</code></pre>

<p>использует именованные аргументы <code>sep</code> и <code>end</code> и выводит:</p>

<pre><code class="language-no-highlight">aaaa*bbbbb##cccc()dddd
eeee123ffffpython</code></pre>

<p>Используя именованные аргументы <code>sep</code> и <code>end</code> можно не беспокоиться, какой из них указать первым.</p>

<p><img alt="" height="49" src="https://ucarecdn.com/d9006371-1352-46d7-a2ab-4c627f8f653e/" width="49">   Напомним, что значение по умолчанию для <code>sep=' '</code> (символ пробела),  а для <code>end='\n'</code> (символ перевода строки).</p>

<h3 style="text-align: center;">Комбинирование позиционных и именованных аргументов</h3>

<p>Мы можем вызывать функции, используя именованные и позиционные аргументы одновременно. Но позиционные значения должны быть указаны <strong>до</strong> любых именованных!</p>

<p>Для функции <code>diff()</code> код:</p>

<pre><code class="language-python">res = diff(10, y=3)   # используем позиционный и именованный аргумент</code></pre>

<p>работает как полагается, при этом параметру <code>x</code> соответствует значение $10$.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">res = diff(x=10, 3)   # используем позиционный и именованный аргумент</code></pre>

<p>приводит к возникновению ошибки <code>SyntaxError: positional argument follows keyword argument</code>.</p>

<h2 style="text-align: center;">Необязательные аргументы</h2>

<p>Бывает, что какой-то параметр функции часто принимает одно и то же значение. Например, для функции <code>print()</code> создатели языка Python установили значения параметров <code>sep</code> и <code>end</code> равными символу пробела и символу перевода строки, поскольку эти значения используют наиболее часто.</p>

<p>Другим примером служит функция <code>int()</code> , преобразующая строку в число. Она принимает два аргумента:</p>

<ul>
	<li>первый аргумент: строка, которую нужно преобразовать в число;</li>
	<li>второй аргумент: основание <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" rel="noopener noreferrer nofollow">системы счисления</a>.</li>
</ul>

<p>Это позволяет ей считывать числа в различных системах счисления.</p>

<p>Приведенный ниже код, преобразует двоичное число $101$:</p>

<pre><code class="language-python">num = int('101', 2)     # аргумент 2 указывает на то, что число 101 записано в двоичной системе</code></pre>

<p>В переменной <code>num</code> будет храниться число $5$, так как $101_{2} = 5_{10}$.</p>

<p>Но чаще всего эта функция используется для считывания из строки чисел, записанных в десятичной системе счисления. Утомительно каждый раз писать $10$ вторым аргументом. В таких ситуациях Python позволяет задавать некоторым параметрам значения по умолчанию. У функции <code>int()</code> второй параметр по умолчанию равен $10$, и потому можно вызывать эту функцию с одним аргументом. Значение второго подставится автоматически.</p>

<p>Чтобы задать <strong>значение параметра по умолчанию</strong>, в списке параметров функции достаточно после имени переменной написать знак равенства и нужное значение.</p>

<p>Параметры со значением по умолчанию идут последними, ведь иначе интерпретатор не смог бы понять, какой из аргументов указан, а какой пропущен, и для него нужно использовать значение по умолчанию.</p>

<p>Рассмотрим все то же определение функции <code>make_circle()</code>, которая рисует круг:</p>

<pre><code class="language-python">def make_circle(x, y, radius, line_width, fill):
    # тело функции</code></pre>

<p>Поскольку обычно нам нужно рисовать круг с шириной линии, равной $1$ с заливкой, то логично установить данные значения в качестве значений по умолчанию:</p>

<pre><code class="language-python">def make_circle(x, y, radius, line_width=1, fill=True):
    # тело функции</code></pre>

<p>Теперь для того, чтобы нарисовать стандартный круг, то есть круг имеющий ширину линии, равную $1$ с заливкой, мы вызываем функцию так:</p>

<pre><code class="language-python">make_circle(100, 50, 20)</code></pre>

<p>или так:</p>

<pre><code class="language-python">make_circle(x=100, y=50, radius=20)</code></pre>

<p>Если вам хочется поменять ширину линии и заливку, то вы легко можете это сделать:</p>

<pre><code class="language-python">make_circle(x=100, y=50, radius=20, fill=False)                   # line_width=1, fill=False
make_circle(x=100, y=50, radius=20, line_width=3)                 # fill=True, line_width=3
make_circle(x=100, y=50, radius=20, line_width=5, fill=False)     # line_width=5, fill=False</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/8aafd27a-49a0-44b5-8699-6020d7698319/" width="49">   В соответствии с стандартом PEP 8 и при объявлении аргументов по умолчанию пробел вокруг знака равенства не ставят.</p>

<h3 style="text-align: center;">Изменяемые типы в качестве значений по умолчанию</h3>

<p>При использовании <strong>изменяемых типов данных</strong> в качестве значения параметра по умолчанию можно столкнуться с неожиданными результатами работы функции.</p>

<p>Рассмотрим определение функции <code>append()</code>, где в качестве значения по умолчанию используется изменяемый тип данных (список, тип <code>list</code>):</p>

<pre><code class="language-python">def append(element, seq=[]):
    seq.append(element)
    return seq</code></pre>

<p>Вызывая функцию <code>append()</code> следующим образом:</p>

<pre><code class="language-python">print(append(10, [1, 2, 3]))
print(append(5, [1]))
print(append(1, []))
print(append(3, [4, 5]))</code></pre>

<p>получим ожидаемый вывод:</p>

<pre><code class="language-no-highlight">[1, 2, 3, 10]
[1, 5]
[1]
[4, 5, 3]</code></pre>

<p>А если вызовем функцию <code>append()</code> так:</p>

<pre><code class="language-python">print(append(10))
print(append(5))
print(append(1))</code></pre>

<p> получим <strong>не совсем</strong> ожидаемый вывод:</p>

<pre><code class="language-no-highlight">[10]
[10, 5]
[10, 5, 1]</code></pre>

<p>Что происходит? Значение по умолчанию для параметра создается единожды при определении функции (обычно при загрузке модуля) и становится атрибутом (свойством) функции. Поэтому, если значение по умолчанию изменяемый объект, то его изменение повлияет на каждый следующий вызов функции.</p>

<p>Чтобы посмотреть значения по умолчанию, можно использовать атрибут <code>__defaults__</code>.</p>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">def append(element, seq=[]):
    seq.append(element)
    return seq

print('Значение по умолчанию', append.__defaults__)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">Значение по умолчанию ([],)</code></pre>

<p>Приведенный ниже код:</p>

<pre><code class="language-python">def append(element, seq=[]):
    seq.append(element)
    return seq

print('Значение по умолчанию', append.__defaults__)
print(append(10))
print('Значение по умолчанию', append.__defaults__)
print(append(5))
print('Значение по умолчанию', append.__defaults__)
print(append(1))
print('Значение по умолчанию', append.__defaults__)</code></pre>

<p>выводит:</p>

<pre><code class="language-no-highlight">Значение по умолчанию ([],)
[10]
Значение по умолчанию ([10],)
[10, 5]
Значение по умолчанию ([10, 5],)
[10, 5, 1]
Значение по умолчанию ([10, 5, 1],)</code></pre>

<p>Для решения проблемы можно использовать константу <code>None</code> в качестве значения параметра по умолчанию, а в теле функции устанавливать нужное значение:</p>

<pre><code class="language-python">def append(element, seq=None):
    if seq is None:
        seq = []
    seq.append(element)
    return seq
</code></pre>

<p>Вызывая функцию <code>append()</code> следующим образом:</p>

<pre><code class="language-python">print(append(10))
print(append(5))
print(append(1))</code></pre>

<p> получим <strong>ожидаемый вывод</strong>:</p>

<pre><code class="language-no-highlight">[10]
[5]
[1]</code></pre>

<p><img alt="" height="49" src="https://ucarecdn.com/16537323-1617-4c62-96f0-7296fec2add4/" width="49">   Подход, основанный на значении <code>None</code>, общепринятый в Python.</p>

<h2 style="text-align: center;">Примечания</h2>

<p><strong>Примечание 1.</strong> При написании функций стоит указывать более важные параметры первыми.</p>

<p><strong>Примечание 2.</strong> Именованные аргументы часто используют вместе со значениями по умолчанию.</p>

<p><strong>Примечание 3.</strong> Именованные и позиционные аргументы не всегда хорошо ладят друг с другом. При вызове функции позиционные аргументы должны обязательно идти перед именованными аргументами.</p>

<p><strong>Примечание 4.</strong> Параметр в программировании — принятый функцией аргумент. Термин «аргумент» подразумевает, что конкретно и какой конкретной функции было передано, а параметр — в каком качестве функция применила это принятое. То есть вызывающий код передает аргумент в параметр, который определен в описании (заголовке) функции.</p>

<ul>
	<li><strong>P</strong>arameter → <strong>P</strong>laceholder (заполнитель принадлежит имени функции и используется в теле функции);</li>
	<li><strong>A</strong>rgument → <strong>A</strong>ctual value (фактическое значение, которое передается при вызове функции).</li>
</ul>

<p>Подробнее можно почитать <a href="https://stackoverflow.com/questions/156767/whats-the-difference-between-an-argument-and-a-parameter" rel="noopener noreferrer nofollow">тут</a>.</p>

<p><strong>Примечание 5.</strong> Отличная <a href="https://habr.com/ru/company/ruvds/blog/515678/" rel="noopener noreferrer nofollow">статья</a> на хабре про аргументы функций в Python.</p>

<h2 style="text-align: right;"><strong>Made with 💛 by BEEGEEK</strong></h2>